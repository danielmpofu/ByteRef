{"version":3,"file":"senwes-senwes-authorization.js","sources":["ng://@senwes/senwes-authorization/lib/senwes_token_dev.ts","ng://@senwes/senwes-authorization/lib/senwes-authorization.service.ts"],"sourcesContent":["export const senwes_dev_token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6IjA0NSIsIm5hbWVpZCI6IjA0NSIsImVtYWlsIjoiTXVoYW1tYWQuQW1vZEBzZW53ZXMuY28uemEiLCJnaXZlbl9uYW1lIjoiTXVoYW1tYWQiLCJmYW1pbHlfbmFtZSI6IkFtb2QiLCJvbmVpZCI6IjA0NSIsImVtcGxveWVlTm8iOiIxMDg5MSIsInJvbGUiOlsiRG9jdW1lbnRNYW5hZ2VtZW50X1N1cGVyVXNlciJdLCJ3aW5kb3dzdXNlcmNsYWltIjoibXVoYW1tYWRhIiwibmJmIjoxNTk3OTg4NTQwLCJleHAiOjE5MjIzOTk5OTksImlhdCI6MTU5Nzk4ODU0MCwiaXNzIjoiU2Vud2VzIEF1dGggU2VydmljZSIsImF1ZCI6IlNlbndlcyBBcHBsaWNhdGlvbiBVc2VycyJ9.krMb-5byqnJ1LwJpNv688mtGo4n6146h7_sKzHFiGx0`;","import { Injectable, isDevMode } from '@angular/core';\r\nimport { JwtModule, JwtHelperService } from '@auth0/angular-jwt';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { IUser } from './user.model';\r\nimport { take } from 'rxjs/operators';\r\nimport { senwes_dev_token } from './senwes_token_dev';\r\nimport { IEmployee } from './employee.model';\r\nimport { IPermission } from './permission.model';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SenwesAuthorizationService {\r\n  public base_url = window.location.origin;\r\n  public appId: string = '';\r\n  private _user: IUser;\r\n\r\n  public jwtHelper = new JwtHelperService();\r\n\r\n  constructor(\r\n    private _http: HttpClient,\r\n  ) { }\r\n\r\n  /**\r\n   * Retrieves raw token from local storage\r\n   */\r\n  public getToken(): string {\r\n    if (isDevMode()) {\r\n      return localStorage.getItem(\"senwes_token_dev\");\r\n    }\r\n    return localStorage.getItem(\"senwes_token\");\r\n  }\r\n\r\n  /**\r\n   * Retrieves decoded token from local storage\r\n   */\r\n  public getDecodedToken(): any {\r\n    if (isDevMode()) {\r\n    return this.jwtHelper.decodeToken(localStorage.getItem(\"senwes_token_dev\"));\r\n    }\r\n    return this.jwtHelper.decodeToken(localStorage.getItem(\"senwes_token\"));\r\n  }\r\n\r\n  /**\r\n   * Confirms validity of token\r\n   */\r\n  public async authenticateToken(appId: string, customDevToken: string = null): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      if (isDevMode()) {\r\n          localStorage.removeItem('senwes_token_dev');\r\n\r\n          if (customDevToken != null) {\r\n            localStorage.setItem('senwes_token_dev', customDevToken);\r\n          } else {\r\n            localStorage.setItem('senwes_token_dev', senwes_dev_token);\r\n          }\r\n\r\n          resolve(true);\r\n          this.initializeUser();\r\n        } else {\r\n          this.appId = appId;\r\n          let url = '';\r\n          if (this.base_url.indexOf(\"online-qa.senwes.co.za\") > -1 || this.base_url.indexOf(\"online-qa.hinterland.co.za\") > -1 || this.base_url.indexOf(\"online-qa.my-intranet.co.za\") > -1) {\r\n            url = `https://wsstaging.senwes.co.za/api/oneagri/security/api/Authentication/Validate/Token`;\r\n          } else {\r\n            url = `https://ws.senwes.co.za/service/oneagri/security/api/Authentication/Validate/Token`;\r\n          }\r\n\r\n          const headers = new HttpHeaders({\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${this.getLocalToken()}`\r\n          })\r\n\r\n          this._http.get<boolean>(url, { headers: headers })\r\n            .pipe(take(1))\r\n            .subscribe(\r\n              (res: any) => {\r\n                if (res === false) {\r\n                  localStorage.removeItem('senwes_token');\r\n                  this.redirectJWTIssuerPage(appId);\r\n                  resolve(false);\r\n                } else if (res === true) {\r\n                  resolve(true);\r\n                  this.initializeUser();\r\n                } else {\r\n                  resolve(false);\r\n                  console.error('Unxpected response validate token: ', res);\r\n                  this.redirectAccessDenied();\r\n                }\r\n              },\r\n              error => {\r\n                reject(false);\r\n                console.error(\"AuthService unexpected error occurred\", error);\r\n                this.redirectAccessDenied();\r\n              });\r\n        }\r\n    });\r\n  }\r\n\r\n  private getLocalToken(): string {\r\n    let token = '';\r\n    if (isDevMode()) {\r\n      token = localStorage.getItem(\"senwes_token_dev\");\r\n    } else {\r\n      token = localStorage.getItem(\"senwes_token\");\r\n    }\r\n    return token;\r\n  }\r\n\r\n  private redirectJWTIssuerPage(returnURL: string) {\r\n    if (this.base_url.indexOf(\"online-qa.senwes.co.za\") > -1 || this.base_url.indexOf(\"online-qa.hinterland.co.za\") > -1 || this.base_url.indexOf(\"online-qa.my-intranet.co.za\") > -1) {\r\n      window.location.href = `https://integration-qa.senwes.co.za/service/security/oneagri/auth/authentication?ApplicationID=${this.appId}`;\r\n    } else {\r\n      window.location.href = `https://identity.oneagri.co.za/authentication?ApplicationID=${this.appId}`;\r\n    }\r\n  }\r\n\r\n  public signout() {\r\n    localStorage.removeItem('senwes_token');\r\n    localStorage.removeItem('senwes_token_dev');\r\n    if (isDevMode()) {\r\n      window.location.reload;\r\n    } else {\r\n      if (this.base_url.indexOf(\"online-qa.senwes.co.za\") > -1 || this.base_url.indexOf(\"online-qa.hinterland.co.za\") > -1 || this.base_url.indexOf(\"online-qa.my-intranet.co.za\") > -1) {\r\n        window.location.href = `https://integration-qa.senwes.co.za/service/security/oneagri/auth/signout`;\r\n      } else {\r\n        window.location.href = `https://identity.oneagri.co.za/signout`;\r\n      }\r\n    }\r\n  }\r\n\r\n  public home() {\r\n    if (isDevMode()) {\r\n      window.location.reload;\r\n    } else {\r\n      window.location.href = this.base_url;\r\n    }\r\n  }\r\n\r\n  private redirectAccessDenied() {\r\n    window.location.href = `http://www.oneagri.co.za/auth/accessdenied/`;\r\n  }\r\n\r\n  public getUserRoles(): Array<string> {\r\n    if (this._user) {\r\n      return this._user.role;\r\n    }\r\n  }\r\n\r\n  public isUserInRole(roleName: string): boolean {\r\n    if (this._user) {\r\n      if (Array.isArray(this._user.role)) {\r\n        const res = this._user.role.findIndex(x => x == roleName);\r\n        return (res !== -1);\r\n      } else {\r\n        return (roleName === this._user.role);\r\n      }\r\n    }\r\n  }\r\n\r\n  public getUserPermissionsBySystemName(filter: string): IPermission[] {\r\n    if (this._user) {\r\n      if (Array.isArray(this._user.permissions)) {\r\n        const res = this._user.permissions.filter(x => x.SystemName == filter);\r\n        return res;\r\n      }\r\n    }\r\n  }\r\n\r\n  public hasPermission(permissionGroup: string, permissionName: string): boolean {\r\n    if (this._user) {\r\n      if (Array.isArray(this._user.permissions)) {\r\n        const res = this._user.permissions.filter(x => x.PermissionGroup == permissionGroup && x.PermissionName == permissionName);\r\n        return res.length > 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  public getRawUserObject(): IUser {\r\n    return this._user;\r\n  }\r\n\r\n  public getUserWindowsClaim(): string {\r\n    if (this._user) {\r\n      return this._user.windowsuserclaim;\r\n    }\r\n  }\r\n\r\n  public getUserCompany(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.company;\r\n    }\r\n  }\r\n\r\n  public getUserDivision(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.division;\r\n    }\r\n  }\r\n\r\n  public getUserSection(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.section;\r\n    }\r\n  }\r\n\r\n  public getUserJobTitle(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.jobtitle;\r\n    }\r\n  }\r\n\r\n  public getUserEmpObfuscation(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.employeeobfuscation;\r\n    }\r\n  }\r\n\r\n  public getUserSite(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.site;\r\n    }\r\n  }\r\n\r\n  public getUserReportsTo(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.reportsTo;\r\n    }\r\n  }\r\n\r\n  public getUserDepartment(): string {\r\n    if (this._user.employee) {\r\n      return this._user.employee.department;\r\n    }\r\n  }\r\n\r\n  public getUserEmployeeNumber(): string {\r\n    if (this._user) {\r\n      return this._user.employeeNo;\r\n    }\r\n  }\r\n\r\n  public getUserOneId(): string {\r\n    if (this._user) {\r\n      return this._user.oneid;\r\n    }\r\n  }\r\n\r\n  public getUserDisplayName(): string {\r\n    if (this._user) {\r\n      return `${this._user.given_name} ${this._user.family_name}`\r\n    }\r\n  }\r\n\r\n  public getUserEmployeeInfo(): IEmployee {\r\n    if (this._user) {\r\n      return this._user.employee;\r\n    }\r\n  }\r\n\r\n  public getTokenExpired(): boolean {\r\n    this._user = this.jwtHelper.decodeToken(this.getToken());\r\n    if (this._user) {\r\n      return this._user.exp < Math.floor(Date.now() / 1000);\r\n    }\r\n  }\r\n\r\n  public initializeUser(): void {\r\n    this._user = this.jwtHelper.decodeToken(this.getToken());\r\n    if (typeof this._user.role !== 'undefined' && !Array.isArray(this._user.role)) {\r\n      this._user.role = [this._user.role];\r\n    }\r\n\r\n    if (typeof this._user.permissions !== 'undefined' && !Array.isArray(this._user.permissions)) {\r\n      this._user.permissions = [this._user.permissions];\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}